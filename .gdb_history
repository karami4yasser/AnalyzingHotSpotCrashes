run -cp /media/sf_C_DRIVE/Users/D046063/public_html/hotspot/JBreak2017/git/examples/bin Crash4
c
run -cp /media/sf_C_DRIVE/Users/D046063/public_html/hotspot/JBreak2017/git/examples/bin org.simonis.Crash4
c
b unsafe.cpp:113
run -cp /media/sf_C_DRIVE/Users/D046063/public_html/hotspot/JBreak2017/git/examples/bin org.simonis.Crash4
c
p p
where
call ps()
run -cp /media/sf_C_DRIVE/Users/D046063/public_html/hotspot/JBreak2017/git/examples/bin -XX:-UseCompressedOops org.simonis.Crash4
c
cond 1 field_offset <= 8
c
c
call ps()
where
i th
c
call find(0x7fff36ddf660)
x /8g 0x7fff36ddf660
p /x 0x7fff36ddf660
x /8g 0x7fff36ddf660
call ps()
call find(0x00007fff2ee360a0)
call find(0x00007fff2ee360a0)
x /8g 0x00007fff2ee360a0
p ((InstanceKlass*)0x00007fff2ee360a0)->print()
run -cp /media/sf_C_DRIVE/Users/D046063/public_html/hotspot/JBreak2017/git/examples/bin -XX:-UseCompressedOops org.simonis.Crash4
c
where
c
where
c
p &((InstanceKlass*)0)->_super
run -XX:-UseCompressedOops -Xbatch -XX:-UseOnStackReplacement -XX:-TieredCompilation -XX:+PrintCompilation org.simonis.Crash4
c
i b
dis 1
run -cp /media/sf_C_DRIVE/Users/D046063/public_html/hotspot/JBreak2017/git/examples/bin -XX:-UseCompressedOops -Xbatch -XX:-UseOnStackReplacement -XX:-TieredCompilation -XX:+PrintCompilation org.simonis.Crash4
c
where
list
p *this
p recv
x /8g recv
ptype recv
p &(recv->is_klass)
p recv->is_klass
x /4g 0x7ffff5a015f2
dis 0x7ffff5a015f2
disassemble Klass::is_klass()
disassemble 'Klass::is_klass()'
disassemble '<Klass::is_klass() const volatile>'
disassemble 0x7ffff5a015f2
b ciObjectFactory.cpp:401
run -cp /media/sf_C_DRIVE/Users/D046063/public_html/hotspot/JBreak2017/git/examples/bin -XX:-UseCompressedOops -Xbatch -XX:-UseOnStackReplacement -XX:-TieredCompilation -XX:+PrintCompilation org.simonis.Crash4
c
b report_vm_error
run -cp /media/sf_C_DRIVE/Users/D046063/public_html/hotspot/JBreak2017/git/examples/bin -XX:-UseCompressedOops -Xbatch -XX:-UseOnStackReplacement -XX:-TieredCompilation -XX:+PrintCompilation org.simonis.Crash4
c
up
list
up
list
p this
x /4g this
p this->is_instance_klass_slow()
ptype this
ptype this
set print object 
ptype this
p &((InstanceKlass*)0)->_super
p &((InstanceKlass*)0)->_layout_helper
p (int)&((InstanceKlass*)0)->_layout_helper
p (int)&((InstanceKlass*)0)->_super_check_offset 
p (int)&((InstanceKlass*)0)->_name
ptype Metadata
p sizeof(Metadata)
run -cp /media/sf_C_DRIVE/Users/D046063/public_html/hotspot/JBreak2017/git/examples/bin -XX:-UseCompressedOops -Xbatch -XX:-UseOnStackReplacement -XX:-TieredCompilation -XX:+PrintCompilation org.simonis.Crash4
c
up
list
p k
p (int)&((InstanceKlass*)0)->_name
p k->_name
p &((InstanceKlass*)0)->_name
i b
dis 2 3
i b
dis 3.1 3.2
i b
run -cp /media/sf_C_DRIVE/Users/D046063/public_html/hotspot/JBreak2017/git/examples/bin -XX:-UseCompressedOops -Xcomp -Xbatch -XX:-UseOnStackReplacement -XX:-TieredCompilation -XX:+PrintCompilation -XX:CompileCommand="compileonly org.simonis.Crash4$A::crash" org.simonis.Crash4
c
where
p this
up
up
up
run -cp /media/sf_C_DRIVE/Users/D046063/public_html/hotspot/JBreak2017/git/examples/bin -XX:-UseCompressedOops -Xcomp -Xbatch -XX:-UseOnStackReplacement -XX:-TieredCompilation -XX:+PrintCompilation -XX:CompileCommand='compileonly org.simonis.Crash4$A::crash' org.simonis.Crash4
c
where
frame 20
p m
p m->print()
p &((InstanceKlass*)0)->_java_mirror 
p (int)&((InstanceKlass*)0)->_java_mirror 
run -cp /media/sf_C_DRIVE/Users/D046063/public_html/hotspot/JBreak2017/git/examples/bin -XX:-UseCompressedOops -Xcomp -Xbatch -XX:-UseOnStackReplacement -XX:-TieredCompilation -XX:+PrintCompilation -XX:CompileCommand='compileonly org.simonis.Crash4$A::crash' org.simonis.Crash4
c
where
up
p k1
p k2
p k2->print()
p this->print()
list
p k1
p (Klass*)0x7fff3cac9e40->print()
p ((Klass*)0x7fff3cac9e40)->print()
p this
p k1
up
p this_klass->print()
p that_klass->print()
frame 13
p exact_kls->print()
p current_type->remove_speculative()->print()
p current_type->remove_speculative()->dump()
p (int)&((InstanceKlass*)0)->_super_check_offset 
p &((InstanceKlass*)0)->_super_check_offset 
p &((InstanceKlass*)0)->_layout_helper 
p (int)&((InstanceKlass*)0)->_layout_helper 
p (int)&((InstanceKlass*)0)->_secondary_super_cache 
p (int)&((InstanceKlass*)0)->_primary_supers 
quit
